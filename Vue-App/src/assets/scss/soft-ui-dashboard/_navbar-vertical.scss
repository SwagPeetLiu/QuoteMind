// Vertical navbar (top level)
.navbar-vertical {

  // side nav header
  .sidenav-header {
    height: $sidenav-header-height;

    // brand logo paddings
    .navbar-brand {
      padding: 1.5rem 2rem;
    }
  }

  // for images, invert the colour 20% to make it more compatible with the text colours
  .navbar-brand>img,
  .navbar-brand-img {
    filter: invert(20%);
    max-width: 100%;
    max-height: 2rem;
  }

  //(SideNav List for the side menu - second level)
  .navbar-collapse {
    display: block;
    overflow: auto;
    height: $navbar-vertical-inner;

    // Navbar navigation (third level)
    .navbar-nav {
      flex-direction: column !important;

      // Navbar navigation (fourth level)
      .nav-item {
        width: 100%;
        margin-top: 0.125rem;

        // actual route link (fifth level)
        .nav-link {
          display: flex;
          align-items: center;
          white-space: nowrap;
          padding-left: $navbar-padding-x;
          padding-right: $navbar-padding-x;
          font-weight: $navbar-nav-link-font-weight;
          color: $font-color;
          padding-top: $navbar-vertical-nav-link-padding-y;
          padding-bottom: $navbar-vertical-nav-link-padding-y;
          margin: 0 $navbar-vertical-nav-link-padding-x;

          // Apply active styless:
          transition: all $transition-base ease;

          &.active {
            transform: scale(1.2);
            font-weight: 600;
          }

          .nav-link-text,
          .sidenav-mini-icon,
          .sidenav-normal,
          i {
            pointer-events: none;
          }

          // give icon a gradient grey
          .icon {
            @include gradient-directional(nth($light, 1) 0%, nth($light, -1) 100%, $deg: 310deg);

            .ni {
              top: 0;
            }

            svg {
              .color-background {
                fill: $dark-gradient-state;
              }

              .color-foreground {
                fill: $dark-gradient;
              }
            }
          }
        }
      }
    }
  }

  // Expanded navbar specific styles (applys to Thinbar and the sidenav menu)
  // showing a fixed expanded state of the navbar
  &.navbar-expand {
    @each $breakpoint, $dimension in $grid-breakpoints {
      &-#{$breakpoint} {
        @include media-breakpoint-up(#{$breakpoint}) {
          display: block; // displaying the contends on different lines with the same width
          position: fixed; // fixed position
          top: 0;
          bottom: 0;
          width: 100%;
          max-width: $navbar-vertical-open-width !important; // max width of a closure state
          overflow-y: auto;
          padding: 0;
          box-shadow: none;
        }
      }
    }
  }

  // side nav footer cards will have a overlay effects for the img
  .sidenav-footer {
    .card {
      &.card-background {
        &:after {
          opacity: $sidenav-card-opacity;
        }
      }
    }
  }

  // Styles based on background colours of the menu
  &.bg-white {
    box-shadow: $card-box-shadow;
  }

  //when the menu backgroun colour is transparent
  &.bg-transparent {
    box-shadow: none;
  }

  // which the colour of the menu svg when being active
  .navbar-nav>.nav-item .nav-link.active {
    color: $dark;
    .icon {
      svg {
        .color-background,
        .color-foreground {
          fill: $white;
        }
      }
    }
  }
}


// main content's container' cooperation with the side nav's expansion and collapsing
.main-content,
.sidenav {
  transition: $transition-base;
}

.main-content {
  z-index: 999;
}

// Sidenav (menu) specific style
.sidenav {
  z-index: 1000; // always on top

  @each $color, $value in $theme-gradient-colors {

    // if the user defined data-colour HTML attribute is matching, then apply the style of the nav colour
    &[data-color="#{$color}"] {
      .navbar-nav>.nav-item>.nav-link.active .icon {
        @include gradient-directional(nth(#{$value}, 1) 0%, nth(#{$value}, -1) 100%, $deg: 40deg);
      }
    }
  }

  // Menu's brand takes up a new line
  .navbar-brand {
    display: block;
  }

  // Menu will slide open when user hover over the menu
  @include media-breakpoint-up(md) {
    &:hover {
      max-width: $navbar-vertical-open-width;
    }

    // style of the toggler function for nested menu directory (UNUSED)
    .sidenav-toggler {
      padding: 1.5rem;
    }

    // with side nav on the left, main content has left margin
    &.fixed-start~.main-content {
      margin-left: $navbar-vertical-open-width + 1.5;
    }

    // disabled the fixed end style as sidenav show only show from the left
    // &.fixed-end ~ .main-content {
    //   margin-right: $navbar-vertical-open-width + 1.5;
    // }
  }
}


// Sidenav states: manages the main container where the sidenav is shown
// (main container on the index.html ROOT LEVEL)
.g-sidenav-show {

  // the sidenav (index.vue):
  .sidenav {
    .nav-item .collapse {
      height: auto;
      @include transition($transition-base);
    }

    // main nev directory
    .nav-link {
      transition: 0.3s ease;
      opacity: 1;
    }

    // where to the put the nested nav-links:

  }
}

// Small Screen handling (iphone 5 managements):
@include media-breakpoint-down(md) {
  .g-sidenav-show {

    // from right to left (RTL) supports on the displays
    // (move the container to the right to make more space for the nav)
    &.rtl {
      .sidenav {
        transform: translateX($navbar-vertical-open-width + 1.5);
      }
    }

    // from left to right (LTR) supports on the displays
    // (move the container to the left to make more space for the nav)
    &:not(.rtl) {
      .sidenav {
        transform: translateX(-($navbar-vertical-open-width + 1.5));
      }
    }

    // when the side menu is pinned to the start (fixed-start)
    .sidenav {
      &.fixed-start~.main-content {
        margin-left: 0 !important; // remove the margin from the start
      }
    }

    // when pinning the side navbar, the transformation brings the
    // sidenav back into the view
    &.g-sidenav-pinned {
      .sidenav {
        transform: translateX(0);
      }
    }
  }
}


// Transition styles
.navbar-vertical {
  .navbar-brand {

    // animation on hiding the brand span
    .navbar-brand-img,
    span {
      @include transition($transition-base);
    }
  }

  // for the mini icons (UNUSED)
  .nav-item {
    .nav-link {
      span.sidenav-mini-icon {
        @include transition($transition-base);
        text-align: center;
        width: 0;
      }
    }
  }

  // transimition on opening the docs information on the side nav
  .docs-info {
    @include transition($transition-base);
  }
}

// Controls the style when the Menu is hidden (the default 
// style when user is logged in)
@include media-breakpoint-up(md) {

  .g-sidenav-hidden {
    .navbar-vertical {
      max-width: $navbar-vertical-hidden-width !important;

      &.fixed-start~.main-content {
        margin-left: $navbar-vertical-hidden-width + 1.5; // main content will always be 1.5px away from the side menu
      }

      // hide nav-brand's title & Enlarge the width of the image
      .navbar-brand {
        img {
          width: auto !important;
        }

        span {
          opacity: 0;
        }
      }

      // show the nav link's icon only, hide the text, not
      // showing a white background and shadow for such 
      .nav-item {
        .nav-link {
          &.active {
            box-shadow: none;
            background-color: transparent;
          }

          .icon {
            padding: 10px;
          }

          .nav-link-text,
          .sidenav-normal {
            opacity: 0;
            width: 0;
          }
        }
      }

      // hide the texts the sidenav footerfor both card & button
      .sidenav-footer .btn {
        padding: auto;

        .fa {
          font-size: 1.2rem;
          margin-left: 5px;
        }

        .docs-info {
          display: none;
        }
      }

      .card.card-background {
        .icon-shape {
          margin-bottom: 0 !important;
        }

        .docs-info {
          display: none;
        }
      }

      // On hovering, show all the information available in the menu
      &:hover {
        max-width: $navbar-vertical-open-width !important;

        &.fixed-start~.main-content {
          margin-left: $navbar-vertical-open-width + 1.5;
        }

        .navbar-brand {
          span {
            opacity: 1;
          }
        }

        .nav-item {
          .nav-link {

            .nav-link-text,
            .sidenav-normal {
              opacity: 1;
              width: auto;
            }
          }
        }

        &.bg-transparent {
          .navbar-nav .nav-link.active{
            background-color: $white;
            box-shadow: $box-shadow-sm;
            margin: 4px $navbar-vertical-nav-link-padding-x + 1;
            border-radius: $navbar-nav-link-border-radius;
          }
        }

        .sidenav-footer .btn {
          .fa {
            font-size: 1.2rem;
            margin-left: 0;
          }

          .docs-info {
            display: inline-block;
            width: auto;
            height: auto;
          }
        }

        .card.card-background {
          .icon-shape {
            margin-bottom: 1rem !important;
          }

          .docs-info {
            margin-left: 8px;
            display: inline-block;
            width: auto;
            height: auto;
          }
        }
      }
    }
  }
}

// Navbar Vertical Extend (for nesting elements)
.navbar-vertical {
  .navbar-nav .nav-link[data-bs-toggle="collapse"] {

    // style for the dropdown menu
    &:after {
      display: inline-block;
      font-style: normal;
      font-variant: normal;
      text-rendering: auto;
      -webkit-font-smoothing: antialiased;
      font-family: "Font Awesome 5 Free";
      font-weight: 700;
      content: "\f107";
      margin-left: auto;
      color: rgba($dark-gradient-state, 0.5);
      @include transition($transition-base);
    }

    // when toggling to be opened, then arrow svg will be pointing downward
    &[aria-expanded="true"] {
      &:after {
        color: $dark-gradient-state;
        transform: rotate(180deg);
      }
    }
  }

  // style for nested dropdown menue items (collapse elements within each nav-item)
  .navbar-nav {
    .nav-item {

      .collapse,
      .collapsing {
        .nav {
          @include transition($transition-base);

          .nav-item {
            .nav-link {
              position: relative;
              background-color: transparent;
              box-shadow: none;
              color: rgba($dark-gradient-state, 0.5);
              margin-left: $navbar-vertical-collapse-margin-left;

              &:before {
                content: "";
                position: absolute;
                left: $navbar-vertical-collapse-left;
                top: $navbar-vertical-collapse-top;
                transform: $navbar-vertical-collapse-translate;
                height: $navbar-vertical-collapse-dot-size;
                width: $navbar-vertical-collapse-dot-size;
                border-radius: $border-radius-2xl;
                background: rgba($dark-gradient-state, 0.5);
              }

              &.active {
                color: $dark-gradient-state;

                &:before {
                  height: $navbar-vertical-collapse-dot-size-active;
                  width: $navbar-vertical-collapse-dot-size-active;
                  background: $dark-gradient-state;
                }
              }
            }

            &.active {
              .nav-link {
                color: $dark-gradient-state;

                &:before {
                  height: $navbar-vertical-collapse-dot-size-active;
                  width: $navbar-vertical-collapse-dot-size-active;
                  background: $dark-gradient-state;
                }
              }
            }
          }
        }
      }
    }
  }

  &.blur {
    .navbar-nav>.nav-item {
      .nav-link {
        background-color: transparent;
        box-shadow: none;
      }
    }
  }
}